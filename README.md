# The crate for a simple zipping - simple_rust_zip

## Why

There are many good implementations of a zipping, however they are too
good. I need some very basic and simple.

##  How to use

First you can create a zip file calling
```rust
let mut zip = simzip::ZipInfo::new_with_comment("test.zip", 
    "Generated by WebFolder (Java nio) 1.9.153, Copyright (c) 2009, 2025 by Dmitriy Rogatkin");
```
Then you can add zip entries using:
```
zip.add(simzip::ZipEntry::new(".gitignore", r#"src/test
test.zip"#.as_bytes().to_vec()));
```
Or:
```rust
zip.add(simzip::ZipEntry::from_file("README.md", Some("doc")));
```
for files. Finally you can store the zip in the file system by calling:
```rust
match zip.store() {
   Ok(()) => println!{"Zipped good!"},
   Err(msg) => println!{"zip error: {msg}"}
}
```
The underline code will automatically add correct file permissions on UNIX systems.

There is nothing to prevent you to continue adding content after storing, and
then to store again. But remember that repeating storing will overwrite a
previosly stored zip unless you change its name. A repeating store can be
useful in a case of an error like an insufficient disk space hoping that after some time
more space will be available.

## Limitations

A created zip file can't exceed 2GB. A zip entry can't exceed available RAM size.
Streaming can't be used, because same zip content gets updated after an initial
writing.

## Building the crate

Obtain the RustBee first. It's an alternative tool for Cargo. You may need to build it for your platform. 
The building is a clearly simple and explained [here](https://gitlab.com/tools6772135/rusthub/-/blob/master/src/rust/rustcgi/README.md).
The crate has one dependency. It gets built as a part of a building of the RustBee. Just verify that the right RustBee repository location is
specified in [bee.7b](https://github.com/vernisaz/simple_rust_zip/blob/ce7bf7385eef7d8bd84690b7fefe82f2a0275d9f/bee.7b#L2).

**rb** will create the **simzip** crate.

if you plan to *deflat* zip entires, then set the build script variable "use deflater" to **true** (default value). 
Use *deflater* [bee.7b](./libdeflate/bee.7b) to buiild the required crate. Read instructions inside the *bee.7b* how to build.

## Future

More compressing algorithms (including encryption) can be added in the future.